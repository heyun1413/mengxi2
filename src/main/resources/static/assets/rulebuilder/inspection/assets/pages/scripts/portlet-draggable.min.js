// iframe高度自适应
function iframeHeightChange(h) {
    var main = $(window.parent.document).find("#mainFrame");
    var thisheight = $("body").height();
    if (thisheight >= h) {
        main.height(thisheight);
    } else {
        main.height(h);
    }
}

var PortletDraggable = function() {
    return { 
    	init: function() { 
    		jQuery().sortable && $("#sortable_portlets").sortable({ 
    			connectWith: ".portlet", 
    			items: ".portlet", 
    			opacity: .8, 
    			handle: ".portlet-title", 
    			coneHelperSize: !0, 
    			placeholder: "portlet-sortable-placeholder", 
    			forcePlaceholderSize: !0, 
    			tolerance: "pointer", 
    			helper: "clone", 
    			tolerance: "pointer", 
    			forcePlaceholderSize: !0, 
    			helper: "clone", 
    			cancel: ".portlet-sortable-empty, .portlet-fullscreen", 
    			revert: 250, 
    			update: function(e, t) { 
    				iframeHeightChange(0);
                    t.item.prev().hasClass("portlet-sortable-empty") && t.item.prev().before(t.item);
                } 
            }) 
    	} 
    } 
}();

jQuery(document).ready(function() { 
	PortletDraggable.init() 
});
